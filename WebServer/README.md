# üåê –ü—Ä–æ—Å—Ç–æ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ C++

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ **C++23** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ Linux (`socket`, `epoll`). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç GET-–∑–∞–ø—Ä–æ—Å—ã, –æ—Ç–¥–∞—á—É —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (–≤–∫–ª—é—á–∞—è –±–∏–Ω–∞—Ä–Ω—ã–µ), –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MIME-—Ç–∏–ø–æ–≤ –∏ graceful shutdown –ø–æ `SIGINT`.

---

## üìê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∫—Ä–∞—Ç–∫–æ)

–°–µ—Ä–≤–µ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ **—Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ `epoll`** (Linux-only), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ –ø–æ—Ç–æ–∫–æ–≤.

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **TCP-—Å–æ–∫–µ—Ç**: —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç `8888`.
- **Epoll-—Ü–∏–∫–ª**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.
- **HTTP-–ø–∞—Ä—Å–µ—Ä**: –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ø—É—Ç—å –∏–∑ `GET /path HTTP/1.1`.
- **MIME-–¥–µ—Ç–µ–∫—Ç–æ—Ä**: `.html` ‚Üí `text/html`, `.js` ‚Üí `application/javascript`, `.png` ‚Üí `image/png` –∏ –¥—Ä.
- **Graceful shutdown**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ `Ctrl+C`.

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–∫–∞—Ä—Ç–∏–Ω–∫–∏, —à—Ä–∏—Ñ—Ç—ã –∏ —Ç.–ø.).
- –ë–∞–∑–æ–≤–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç path traversal (`../`).

---

## üõ†Ô∏è –°–±–æ—Ä–∫–∞ (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CMake)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Linux (–∏–∑-–∑–∞ `epoll`)
- CMake ‚â• 3.22
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C++23 (GCC ‚â• 12 –∏–ª–∏ Clang ‚â• 15)

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:
```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å–±–æ—Ä–∫–∏
mkdir build && cd build

# 2. –°–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
cmake ..

# 3. –°–æ–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
cmake --build .
```

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

### 1. –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫:
```bash
cd public
./webserver
```
–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É **8888**.  
–û—Ç–∫—Ä–æ–π—Ç–µ: [`http://localhost:8888`](http://localhost:8888)

> ‚ö†Ô∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `public/` –µ—Å—Ç—å `index.html` ‚Äî –∏–Ω–∞—á–µ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ **404 Not Found**.

–ü—Ä–∏–º–µ—Ä `index.html`:
```html
<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>App</title></head>
<body>
  <div id="root"></div>
  <script type="module" src="./index.js"></script>
</body>
</html>
```

### 2. –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ:
```bash
cd public
nohup ./webserver > server.log 2>&1 &
```
–û—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
kill -INT $(pgrep webserver)
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª:
```bash
curl -v http://localhost:8888/
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (e2e)

–¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `pytest`.

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:
```bash
pip install pytest urllib3
```

### –ó–∞–ø—É—Å–∫:
```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
pytest tests/ -v
```

–¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ó–∞–ø—É—Å–∫–∞—é—Ç `./public/webserver`,
- –°–æ–∑–¥–∞—é—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (`index.html`, `test.png` –∏ –¥—Ä.),
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç 200, 404, MIME-—Ç–∏–ø—ã, –∑–∞—â–∏—Ç—É –æ—Ç traversal –∏ graceful shutdown.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ CMakeLists.txt      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ main.cpp        # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ public/             # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ –ò —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ webserver       # ‚Üê –±–∏–Ω–∞—Ä–Ω–∏–∫ –∑–¥–µ—Å—å
‚îÇ   ‚îú‚îÄ‚îÄ index.html      # ‚Üê –∫–ª–∞–¥–∏—Ç–µ —Å—é–¥–∞ –≤–∞—à–∏ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îî‚îÄ‚îÄ tests/
    ‚îî‚îÄ‚îÄ test_e2e.py     # End-to-end —Ç–µ—Å—Ç—ã
```
